<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>生产RDS时时同步到自建mysql8.0 | 谁与匹敌</title>
  <meta name="keywords" content=" RDS , mysql8 , RDS同步自建mysql ">
  <meta name="description" content="生产RDS时时同步到自建mysql8.0 | 谁与匹敌">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="关于我作为一个出身微末的人，我深感自己的幸运，因为我生活在华夏五千多年历史中最好的时代。即使在我孩童时期，我也从未经历过饥寒之苦。回首往事，我意识到自己从小就显得愚钝，但我却未曾停止过努力，像一只掉队的丑小鸭。经过半生的匆匆岁月，我终于努力赚得了一份家业。 我想写下这篇关于我和创建匹敌博客的初衷的文章，主要是为了表达我内心深处的不服输的精神，并激发读者们的斗志。我相信，每个人都有无限的潜力，只要我">
<meta property="og:type" content="website">
<meta property="og:title" content="about me">
<meta property="og:url" content="http://blog.pidi.co/about/index.html">
<meta property="og:site_name" content="谁与匹敌">
<meta property="og:description" content="关于我作为一个出身微末的人，我深感自己的幸运，因为我生活在华夏五千多年历史中最好的时代。即使在我孩童时期，我也从未经历过饥寒之苦。回首往事，我意识到自己从小就显得愚钝，但我却未曾停止过努力，像一只掉队的丑小鸭。经过半生的匆匆岁月，我终于努力赚得了一份家业。 我想写下这篇关于我和创建匹敌博客的初衷的文章，主要是为了表达我内心深处的不服输的精神，并激发读者们的斗志。我相信，每个人都有无限的潜力，只要我">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-12-13T06:14:04.000Z">
<meta property="article:modified_time" content="2023-12-14T00:43:51.073Z">
<meta property="article:author" content="匹敌">
<meta property="article:tag" content="pidi,运维，博客，IT男，匹敌">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 6.3.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>匹敌</span>
</div>

<div class="icon">
    
        
            <a title="rss"
               href="/atom.xml"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/ablewong"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="email"
               href="mailto:6430186@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=6430186&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(27)</small>
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="安全">
            
            安全
            <small>(3)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="监控">
            
            监控
            <small>(3)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="日志">
            
            日志
            <small>(6)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="云平台">
            
            云平台
            <small>(4)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="中间件">
            
            中间件
            <small>(5)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="CICD">
            
            CICD
            <small>(4)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="database">
            
            database
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="linux">
            
            linux
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">关于</a>
        
        <a style="width: 50%"
                
                                           class="friends">友链</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="27">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>阿里云</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>安全防护</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>堡垒机</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>报告</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>部署安装</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>钉钉告警</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>负载</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>高可用</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>告警</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>故障排查</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>监控</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>流程</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>漏洞</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>木马</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>日志</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>日志平台</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>日志收集</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>上线规范</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>实时日志</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>统计</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>文档</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>消息队列</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>域名绑定</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>云产品下架</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>云平台</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>制度</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>alertmanager</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>apache</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>blade</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>cicd</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>dingtalk告警</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>elasticsearch;elk;es</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jenkins</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jenkins插件</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jetlinks</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jetlinks插件</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>log.io</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>logs</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>loki</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>maven</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>maven构建</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>MFA认证</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mock-server</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mock认证</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mq</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mysql</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mysql-cli</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mysql8</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>nas-nfs</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>nexus</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>nfs</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>nginx</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>oss</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>php</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>prometheus</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>promtail</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pushgateway</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>rabbitMQ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>RDS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>RDS同步自建mysql</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>redis</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>rediscluster</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>shell</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SSL证书</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>waf</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="全部文章 日志 "
           href="/2024/01/12/maven%E5%92%8Cnexus%E7%9A%84%E9%85%8D%E7%BD%AE/"
           data-tag="maven,nexus,maven构建"
           data-author="" >
            <span class="post-title" title="maven和nexus的配置">maven和nexus的配置</span>
            <span class="post-date" title="2024-01-12 17:11:06">2024/01/12</span>
        </a>
        
        
        <a  class="全部文章 CICD "
           href="/2024/01/03/jetlinks%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/"
           data-tag="jetlinks,jetlinks插件"
           data-author="" >
            <span class="post-title" title="jetlinks自动化部署">jetlinks自动化部署</span>
            <span class="post-date" title="2024-01-03 10:40:00">2024/01/03</span>
        </a>
        
        
        <a  class="全部文章 日志 "
           href="/2023/11/28/loki-%E9%83%A8%E7%BD%B2/"
           data-tag="日志平台,loki,promtail"
           data-author="" >
            <span class="post-title" title="loki_bc部署">loki_bc部署</span>
            <span class="post-date" title="2023-11-28 20:37:00">2023/11/28</span>
        </a>
        
        
        <a  class="全部文章 监控 "
           href="/2023/10/09/UAT%E7%8E%AF%E5%A2%83%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9Fdocker%E6%96%B9%E5%BC%8F%E9%83%A8%E7%BD%B2/"
           data-tag="部署安装,docker,prometheus,监控,告警"
           data-author="" >
            <span class="post-title" title="UAT环境监控系统docker方式部署">UAT环境监控系统docker方式部署</span>
            <span class="post-date" title="2023-10-09 11:40:00">2023/10/09</span>
        </a>
        
        
        <a  class="全部文章 日志 "
           href="/2023/09/23/log-io%E9%83%A8%E7%BD%B2%E4%B8%8E%E4%BD%BF%E7%94%A8/"
           data-tag="日志,log.io,实时日志"
           data-author="" >
            <span class="post-title" title="log.io部署与使用">log.io部署与使用</span>
            <span class="post-date" title="2023-09-23 19:28:00">2023/09/23</span>
        </a>
        
        
        <a  class="全部文章 中间件 "
           href="/2023/09/12/rabbitMQ/"
           data-tag="部署安装,mq,rabbitMQ,消息队列"
           data-author="" >
            <span class="post-title" title="rabbitMQ">rabbitMQ</span>
            <span class="post-date" title="2023-09-12 15:24:00">2023/09/12</span>
        </a>
        
        
        <a  class="全部文章 云平台 "
           href="/2023/05/06/23-5%E6%9C%88%E4%BB%BD%E4%B8%8B%E6%9E%B6%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%89%E5%85%A8%E4%BA%A7%E5%93%81/"
           data-tag="云产品下架,waf,nginx"
           data-author="" >
            <span class="post-title" title="23-5月份下架阿里云安全产品">23-5月份下架阿里云安全产品</span>
            <span class="post-date" title="2023-05-06 10:55:00">2023/05/06</span>
        </a>
        
        
        <a  class="全部文章 云平台 "
           href="/2023/02/20/%E7%94%9F%E4%BA%A7RDS%E6%97%B6%E6%97%B6%E5%90%8C%E6%AD%A5%E5%88%B0%E8%87%AA%E5%BB%BAmysql8-0/"
           data-tag="RDS,mysql8,RDS同步自建mysql"
           data-author="" >
            <span class="post-title" title="生产RDS时时同步到自建mysql8.0">生产RDS时时同步到自建mysql8.0</span>
            <span class="post-date" title="2023-02-20 20:07:00">2023/02/20</span>
        </a>
        
        
        <a  class="全部文章 云平台 "
           href="/2023/01/30/oss%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A%E5%8F%8A%E8%AF%81%E4%B9%A6%E6%9B%B4%E6%96%B0/"
           data-tag="oss,域名绑定"
           data-author="" >
            <span class="post-title" title="oss域名绑定及证书更新">oss域名绑定及证书更新</span>
            <span class="post-date" title="2023-01-30 10:08:00">2023/01/30</span>
        </a>
        
        
        <a  class="全部文章 CICD "
           href="/2022/09/28/%E7%89%88%E6%9C%AC%E4%B8%8A%E7%BA%BF%E6%93%8D%E4%BD%9C%E8%A7%84%E8%8C%83/"
           data-tag="文档,流程,制度,cicd,上线规范"
           data-author="" >
            <span class="post-title" title="版本上线操作规范">版本上线操作规范</span>
            <span class="post-date" title="2022-09-28 10:34:00">2022/09/28</span>
        </a>
        
        
        <a  class="全部文章 中间件 "
           href="/2022/09/22/%E9%98%BF%E9%87%8C%E4%BA%91%E5%86%85%E7%BD%91nginx%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%B3%95/"
           data-tag="nginx,阿里云,高可用,负载"
           data-author="" >
            <span class="post-title" title="阿里云内网nginx高可用方法">阿里云内网nginx高可用方法</span>
            <span class="post-date" title="2022-09-22 15:49:00">2022/09/22</span>
        </a>
        
        
        <a  class="全部文章 CICD "
           href="/2022/09/22/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E6%A2%B3%E7%90%86/"
           data-tag="文档,流程,cicd"
           data-author="" >
            <span class="post-title" title="项目上线工作流程梳理">项目上线工作流程梳理</span>
            <span class="post-date" title="2022-09-22 12:32:00">2022/09/22</span>
        </a>
        
        
        <a  class="全部文章 中间件 "
           href="/2022/09/07/nas-nfs%E9%83%A8%E7%BD%B2/"
           data-tag="部署安装,nfs,nas-nfs"
           data-author="" >
            <span class="post-title" title="nas-nfs部署">nas-nfs部署</span>
            <span class="post-date" title="2022-09-07 14:10:00">2022/09/07</span>
        </a>
        
        
        <a  class="全部文章 日志 "
           href="/2022/09/04/elasticsearch7-16%E9%83%A8%E7%BD%B2/"
           data-tag="elasticsearch;elk;es"
           data-author="" >
            <span class="post-title" title="Elasticsearch7.16.1和kibana集群部署">Elasticsearch7.16.1和kibana集群部署</span>
            <span class="post-date" title="2022-09-04 15:45:00">2022/09/04</span>
        </a>
        
        
        <a  class="全部文章 日志 "
           href="/2022/09/04/elasticsearch7-8-1%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/"
           data-tag="elasticsearch;elk;es"
           data-author="" >
            <span class="post-title" title="Elasticsearch7.8.1 和 kibana集群部署">Elasticsearch7.8.1 和 kibana集群部署</span>
            <span class="post-date" title="2022-09-04 15:45:00">2022/09/04</span>
        </a>
        
        
        <a  class="全部文章 CICD "
           href="/2022/08/20/jenkins%E9%83%A8%E7%BD%B2%E5%8F%8A%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85/"
           data-tag="jenkins,jenkins插件"
           data-author="" >
            <span class="post-title" title="jenkins部署及插件安装">jenkins部署及插件安装</span>
            <span class="post-date" title="2022-08-20 11:40:00">2022/08/20</span>
        </a>
        
        
        <a  class="全部文章 监控 "
           href="/2022/07/11/%E5%85%AC%E5%8F%B8%E7%9B%91%E6%8E%A7%E9%83%A8%E7%BD%B2/"
           data-tag="prometheus,告警,alertmanager,dingtalk告警,钉钉告警,pushgateway"
           data-author="" >
            <span class="post-title" title="公司监控部署">公司监控部署</span>
            <span class="post-date" title="2022-07-11 15:33:00">2022/07/11</span>
        </a>
        
        
        <a  class="全部文章 安全 "
           href="/2022/07/11/%E5%A0%A1%E5%9E%92%E6%9C%BAssh%E8%AE%A4%E8%AF%81%E4%B8%8D%E8%83%BD%E5%BC%80%E5%90%AFMFA/"
           data-tag="堡垒机,云平台,MFA认证"
           data-author="" >
            <span class="post-title" title="堡垒机ssh认证不能开启MFA">堡垒机ssh认证不能开启MFA</span>
            <span class="post-date" title="2022-07-11 15:19:00">2022/07/11</span>
        </a>
        
        
        <a  class="全部文章 安全 "
           href="/2022/07/07/%E5%AE%98%E7%BD%91%E6%8D%A2%E8%AF%81%E4%B9%A6/"
           data-tag="docker,SSL证书,php,apache"
           data-author="" >
            <span class="post-title" title="官网换证书">官网换证书</span>
            <span class="post-date" title="2022-07-07 17:55:00">2022/07/07</span>
        </a>
        
        
        <a  class="全部文章 中间件 "
           href="/2022/06/30/blade-user%E9%9C%80%E8%A6%81%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1/"
           data-tag="blade,mock-server,mock认证"
           data-author="" >
            <span class="post-title" title="blade-user需要认证服务">blade-user需要认证服务</span>
            <span class="post-date" title="2022-06-30 15:16:00">2022/06/30</span>
        </a>
        
        
        <a  class="全部文章 监控 "
           href="/2022/06/10/promethues/"
           data-tag="部署安装,docker,prometheus,监控,告警"
           data-author="" >
            <span class="post-title" title="promethues">promethues</span>
            <span class="post-date" title="2022-06-10 19:07:00">2022/06/10</span>
        </a>
        
        
        <a  class="全部文章 中间件 "
           href="/2022/05/23/AlibabaCloud%E5%AE%89%E8%A3%85mysql8%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%91%BD%E4%BB%A4/"
           data-tag="部署安装,mysql,mysql-cli"
           data-author="" >
            <span class="post-title" title="AlibabaCloud安装mysql8客户端命令">AlibabaCloud安装mysql8客户端命令</span>
            <span class="post-date" title="2022-05-23 16:40:00">2022/05/23</span>
        </a>
        
        
        <a  class="全部文章 安全 "
           href="/2022/05/10/Spring-boot-gateway%E6%BC%8F%E6%B4%9E/"
           data-tag="安全防护,漏洞,木马,故障排查"
           data-author="" >
            <span class="post-title" title="Spring_boot_gateway漏洞">Spring_boot_gateway漏洞</span>
            <span class="post-date" title="2022-05-10 17:23:00">2022/05/10</span>
        </a>
        
        
        <a  class="全部文章 日志 "
           href="/2022/05/10/nginx%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/"
           data-tag="nginx,logs,日志收集"
           data-author="" >
            <span class="post-title" title="nginx日志分析">nginx日志分析</span>
            <span class="post-date" title="2022-05-10 09:19:00">2022/05/10</span>
        </a>
        
        
        <a  class="全部文章 云平台 "
           href="/2022/04/21/%E8%BF%90%E7%BB%B42022%E5%B9%B4%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93%E6%8A%A5%E5%91%8A/"
           data-tag="云平台,报告,统计"
           data-author="" >
            <span class="post-title" title="运维2022年年度总结报告">运维2022年年度总结报告</span>
            <span class="post-date" title="2022-04-21 11:46:00">2022/04/21</span>
        </a>
        
        
        <a  class="全部文章 database "
           href="/2021/03/02/%E9%83%A8%E7%BD%B2redis5-0cluster%E9%9B%86%E7%BE%A4/"
           data-tag="部署安装,redis,rediscluster"
           data-author="" >
            <span class="post-title" title="部署redis5.0cluster集群">部署redis5.0cluster集群</span>
            <span class="post-date" title="2021-03-02 09:40:00">2021/03/02</span>
        </a>
        
        
        <a  class="全部文章 linux "
           href="/2015/05/23/shell%E4%B8%89%E4%B8%AA%E7%81%AB%E6%9E%AA%E6%89%8B/"
           data-tag="shell"
           data-author="" >
            <span class="post-title" title="shell三个火枪手">shell三个火枪手</span>
            <span class="post-date" title="2015-05-23 16:40:00">2015/05/23</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-生产RDS时时同步到自建mysql8-0" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">生产RDS时时同步到自建mysql8.0</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="云平台">云平台</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color4">RDS</a>
            
            <a class="color2">mysql8</a>
            
            <a class="color3">RDS同步自建mysql</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2023-12-19 11:37:13'>2023-02-20 20:07</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7RDS%E6%97%B6%E6%97%B6%E5%90%8C%E6%AD%A5%E5%88%B0%E8%87%AA%E5%BB%BAmysql8-0"><span class="toc-text">生产RDS时时同步到自建mysql8.0</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="toc-text">一、环境说明：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%90%AD%E5%BB%BAmysql-server8-0"><span class="toc-text">二、搭建mysql-server8.0</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E4%B8%8B%E8%BD%BDmysql%E7%9A%84yum%E6%BA%90%EF%BC%8C%E5%AE%89%E8%A3%85%E6%BA%90%E3%80%82%E7%A1%AE%E8%AE%A4%E4%B8%8B%E6%9C%89%E6%B2%A1%E6%9C%89mariadb%EF%BC%8C%E9%9C%80%E8%A6%81%E5%8D%B8%E8%BD%BD%E6%8E%89%E3%80%82"><span class="toc-text">1、下载mysql的yum源，安装源。确认下有没有mariadb，需要卸载掉。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%AE%89%E8%A3%85mysql%E5%92%8Cmysql-server"><span class="toc-text">2、安装mysql和mysql-server</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E6%B7%BB%E5%8A%A0%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E4%BF%AE%E6%94%B9%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE%EF%BC%8C%E5%9B%A0%E4%B8%BA-data%E7%9B%98%E7%A9%BA%E9%97%B4%E5%A4%A7%EF%BC%8C%E6%8D%A2%E5%88%B0%E9%82%A3%E5%8E%BB%E3%80%82"><span class="toc-text">3、添加配置文件，修改存储位置，因为&#x2F;data盘空间大，换到那去。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%95%B0"><span class="toc-text">4、配置数据库连接数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5%E3%80%81%E9%87%8D%E5%90%AFmysqld-%E5%A2%9E%E5%8A%A0%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E3%80%82"><span class="toc-text">5、重启mysqld,增加开机自启。</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%A4%87%E4%BB%BDRDS%E6%95%B0%E6%8D%AE-%E8%BF%98%E5%8E%9F%E5%88%B0%E8%87%AA%E5%BB%BAmysql-%E4%B8%8D%E7%94%A8dump%E5%85%A8%E9%83%A8%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8C%E4%B9%9Fdump%E4%B8%8D%E5%87%BA%E6%9D%A5"><span class="toc-text">三、备份RDS数据, 还原到自建mysql. 不用dump全部数据库，也dump不出来.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E3%80%81RDS%E4%B8%8A%E5%A2%9E%E5%8A%A0%E5%90%8C%E6%AD%A5%E7%94%A8%E6%88%B7%EF%BC%8C%E7%BB%99%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E3%80%81"><span class="toc-text">四、RDS上增加同步用户，给用户权限、</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%A2%9E%E5%8A%A0%E3%80%82"><span class="toc-text">添加用户到阿里云控制台增加。</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E9%85%8D%E7%BD%AE%E8%87%AA%E5%BB%BAmysql%E5%90%8C%E6%AD%A5RDS"><span class="toc-text">五、配置自建mysql同步RDS</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E6%9F%A5%E7%9C%8B%E5%A4%87%E4%BB%BD%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%96%87%E4%BB%B6GTID%E4%BD%8D%E7%BD%AE"><span class="toc-text">1、查看备份下面的文件GTID位置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E9%85%8D%E7%BD%AE%E5%90%8C%E6%AD%A5-%E8%BF%99%E9%87%8C%E6%98%AF%E8%BF%9E%E6%8E%A5%E8%87%AA%E5%BB%BAmysql%E6%93%8D%E4%BD%9C"><span class="toc-text">2、配置同步,这里是连接自建mysql操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E9%87%8D%E6%96%B0%E8%AE%BE%E7%BD%AEslave"><span class="toc-text">3、重新设置slave</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E5%BC%80%E5%A7%8B%E5%90%8C%E6%AD%A5"><span class="toc-text">4、开始同步</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%A3%80%E6%9F%A5%E5%90%8C%E6%AD%A5%E7%8A%B6%E6%80%81"><span class="toc-text">六、检查同步状态</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E8%BF%9E%E6%8E%A5%E5%88%B0RDS%E6%9F%A5%E7%9C%8B%EF%BC%8C%E8%BF%99%E6%98%AF%E4%B8%BB%E5%BA%93show-master-status-G%E8%BF%87%E5%87%A0%E5%88%86%E9%92%9F%E6%9F%A5%E4%B8%80%E4%B8%8B%E3%80%82Position%E5%BA%94%E8%AF%A5%E4%BC%9A%E6%9B%B4%E6%96%B0"><span class="toc-text">1、连接到RDS查看，这是主库show  master  status\G过几分钟查一下。Position应该会更新</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E8%BF%9E%E6%8E%A5%E5%88%B0MYSQL%E6%9F%A5%E7%9C%8B-show-slave-status-G"><span class="toc-text">2、连接到MYSQL查看. show   slave  status \G</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E5%88%B0RDS%E6%95%B0%E6%8D%AE%E5%BA%93%E9%87%8C%E7%BB%99%E7%94%A8%E6%88%B7%E6%94%B9%E4%B8%AA%E5%AF%86%E7%A0%81%E3%80%82%E7%9C%8B%E6%98%AF%E5%90%A6%E4%BC%9A%E5%90%8C%E6%AD%A5%E3%80%82"><span class="toc-text">3、到RDS数据库里给用户改个密码。看是否会同步。</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%83%E3%80%812022-10-27%E6%9F%A5%E5%88%B0%E5%90%8C%E6%AD%A5%E5%A4%B1%E8%B4%A5"><span class="toc-text">七、2022.10.27查到同步失败.</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E5%85%88%E5%9C%A8%E7%94%9F%E4%BA%A7RDS%E5%AF%BC%E5%87%BA%E6%89%80%E6%9C%89%E5%BA%93%E3%80%82"><span class="toc-text">1、先在生产RDS导出所有库。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%88%A0%E9%99%A4%E8%87%AA%E5%BB%BAmysql%E7%8E%B0%E5%9C%A8%E7%9A%84%E6%89%80%E6%9C%89%E5%BA%93"><span class="toc-text">2、删除自建mysql现在的所有库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E9%85%8D%E7%BD%AE-%E5%90%8C%E6%AD%A5%E4%BD%8D%E7%BD%AE"><span class="toc-text">3、配置 同步位置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E6%9F%A5%E7%9C%8B%E6%98%AF%E5%90%A6%E5%90%8C%E6%AD%A5%E6%88%90%E5%8A%9F"><span class="toc-text">4、查看是否同步成功</span></a></li></ol></li></ol></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="生产RDS时时同步到自建mysql8-0"><a href="#生产RDS时时同步到自建mysql8-0" class="headerlink" title="生产RDS时时同步到自建mysql8.0"></a>生产RDS时时同步到自建mysql8.0</h1><h4 id="一、环境说明："><a href="#一、环境说明：" class="headerlink" title="一、环境说明："></a>一、环境说明：</h4><p>RDS版本： MySQL8.0;  小版本信息 rds_20220331 ; 实例规格 mysql.n2.large.2c</p>
<p>自建mysql版本：mysql  Ver 8.0.29 for Linux on x86_64 (MySQL Community Server - GPL)</p>
<p>自建mysql机器 OS:  Alibaba Cloud Linux 3</p>
<p>参考链接：<a target="_blank" rel="noopener" href="http://www.52codes.net/article/76699.html">http://www.52codes.net/article/76699.html</a></p>
<p>本想用xtraback，但Alibaba Cloud Linux装这个装不上，编译安装也是总报错ld未找到，但我执行ld命令没一点问题。后面放弃了。用mysqldump了</p>
<h4 id="二、搭建mysql-server8-0"><a href="#二、搭建mysql-server8-0" class="headerlink" title="二、搭建mysql-server8.0"></a>二、搭建mysql-server8.0</h4><h5 id="1、下载mysql的yum源，安装源。确认下有没有mariadb，需要卸载掉。"><a href="#1、下载mysql的yum源，安装源。确认下有没有mariadb，需要卸载掉。" class="headerlink" title="1、下载mysql的yum源，安装源。确认下有没有mariadb，需要卸载掉。"></a>1、下载mysql的yum源，安装源。确认下有没有mariadb，需要卸载掉。</h5><pre><code class="shell">wget https://dev.mysql.com/get/mysql80-community-release-el7-6.noarch.rpm

yum localinstall mysql80-community-release-el7-6.noarch.rpm
sudo rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022
</code></pre>
<h5 id="2、安装mysql和mysql-server"><a href="#2、安装mysql和mysql-server" class="headerlink" title="2、安装mysql和mysql-server"></a>2、安装mysql和mysql-server</h5><pre><code class="shell">yum install mysql-community-server mysql -y
systemctl status mysqld
</code></pre>
<h5 id="3、添加配置文件，修改存储位置，因为-data盘空间大，换到那去。"><a href="#3、添加配置文件，修改存储位置，因为-data盘空间大，换到那去。" class="headerlink" title="3、添加配置文件，修改存储位置，因为&#x2F;data盘空间大，换到那去。"></a>3、添加配置文件，修改存储位置，因为&#x2F;data盘空间大，换到那去。</h5><pre><code class="shell">systemctl start mysqld
cat /var/logs/mysql.log	|grep password #找到密码
mysql -uroot -p 	#登陆上去
mysql&gt; ALTER USER USER() IDENTIFIED BY &#39;9sz!ZM33f1%ymh$&#39;; 	#更新下密码
mysql&gt; update mysql.user set host=&#39;%&#39; where user=&#39;root&#39;;
mysql&gt; ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;MyNewPass&#39;; #上面已经改了，这里可不改了。
mysql&gt; FLUSH PRIVILEGES;
systemctl stop mysqld
mv /var/lib/mysql /data/		#把目前的数据迁移到data盘。
vim /etc/my.cnf
datadir=/data/mysql				#改到data目录下，data盘空间大。
binlog_format = row 
#gtid_mode=on					#这个可以先不开启，有可能启不来
#enforce_gtid_consistency=on		#这个可以先不开启，有可能启不来
server-id = 1234567890			#这个ID随便改，只要不和RDS上重合。

replicate-ignore-db = mysql			#下面几个是同步需要忽略的库
replicate-ignore-db = sys 
replicate-ignore-db = information_schema
replicate-ignore-db = performance_schema
</code></pre>
<h5 id="4、配置数据库连接数"><a href="#4、配置数据库连接数" class="headerlink" title="4、配置数据库连接数"></a>4、配置数据库连接数</h5><p>默认连接数为150</p>
<pre><code class="shell">mysql&gt; show variables like &#39;%max_connections%&#39;;
+------------------------+-------+
| Variable_name          | Value |
+------------------------+-------+
| max_connections        | 151   |
| mysqlx_max_connections | 100   |
+------------------------+-------+
2 rows in set (0.01 sec)
mysql&gt; set global max_connections=10000;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; flush privileges;
Query OK, 0 rows affected (0.02 sec)
</code></pre>
<h5 id="5、重启mysqld-增加开机自启。"><a href="#5、重启mysqld-增加开机自启。" class="headerlink" title="5、重启mysqld,增加开机自启。"></a>5、重启mysqld,增加开机自启。</h5><pre><code class="shell">systemctl enable mysqld
systemctl start mysqld
</code></pre>
<h4 id="三、备份RDS数据-还原到自建mysql-不用dump全部数据库，也dump不出来"><a href="#三、备份RDS数据-还原到自建mysql-不用dump全部数据库，也dump不出来" class="headerlink" title="三、备份RDS数据, 还原到自建mysql. 不用dump全部数据库，也dump不出来."></a>三、备份RDS数据, 还原到自建mysql. 不用dump全部数据库，也dump不出来.</h4><pre><code class="shell">mysqldump -h rm-wz90f37f14v67drr6391.mysql.rds.aliyuncs.com -uac_rdsadmin -p --databases wrp_aciot wrp_blade_cloud wrp_cangdan wrp_insurance wrp_nacos wrp_xxljob &gt; ./sqlalldb.sql
du -sh sqlalldb.sql		#查看下是否有数据大小
vim sqlalldb.sql		#vim看下
</code></pre>
<pre><code class="shell">mysql -u root -p &lt; ./sqlalldb.sql
</code></pre>
<h4 id="四、RDS上增加同步用户，给用户权限、"><a href="#四、RDS上增加同步用户，给用户权限、" class="headerlink" title="四、RDS上增加同步用户，给用户权限、"></a>四、RDS上增加同步用户，给用户权限、</h4><h5 id="添加用户到阿里云控制台增加。"><a href="#添加用户到阿里云控制台增加。" class="headerlink" title="添加用户到阿里云控制台增加。"></a>添加用户到阿里云控制台增加。</h5><pre><code class="shell">mysql -h rm-wz90f37f14v67drr6391.mysql.rds.aliyuncs.com -u ac_rdsadmin -p
mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#39;ac_repliuser&#39;@&#39;%&#39; identified by &#39;xeGy#T!Gwby&#39;;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;identified by &#39;00163e0ef90f&#39;&#39; at line 1
mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#39;ac_rdsadmin&#39;@&#39;%&#39;;               
ERROR 1045 (28000): Access denied for user &#39;ac_rdsadmin&#39;@&#39;%&#39; (using password: YES)
mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#39;ac_rdsadmin&#39;@&#39;%&#39; IDENTIFIED BY &#39;C!5%AYmZK&#39;;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;IDENTIFIED BY &#39;C!5%fjjHaRrAYmZK&#39;&#39; at line 1
mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#39;ac_repliuser&#39;@&#39;%&#39; with grant option;
ERROR 1045 (28000): Access denied for user &#39;ac_rdsadmin&#39;@&#39;%&#39; (using password: YES)
mysql&gt; show grants for ac_rdsadmin@&#39;%&#39; ;
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Grants for ac_rdsadmin@%                                                                                                                                                                                                                                                                                              |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, PROCESS, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER ON *.* TO `ac_rdsadmin`@`%` WITH GRANT OPTION |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
mysql&gt; GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP ON *.* TO &#39;ac_repliuser&#39;@&#39;%&#39; with grant option;
mysql&gt; flush privileges;
mysql&gt; exit
</code></pre>
<p><strong>PS:</strong></p>
<p>MYSQL8.0没有 GRANT ALL PRIVILEGES ON <em>.</em> TO ‘ac_repliuser‘@’%’ identified by ‘00163e0ef90f’;  这写法了，一条命令做了三件事。</p>
<p>create user ‘user_select‘@’%’ identified by ‘nYa#YEpZ5R’;    # 创建用户</p>
<p>GRANT ALL PRIVILEGES ON <em>.</em> TO ‘ac_repliuser‘@’%’ with grant option;  #给权限, 这个才是正解。</p>
<p>但是RDS上ac_rdsadmin 特级用户也没有ALL PRIVILEGES权限了。 只能减少权限赋权给用户</p>
<p>GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP ON <em>.</em> TO ‘ac_repliuser‘@’%’ with grant option;</p>
<h4 id="五、配置自建mysql同步RDS"><a href="#五、配置自建mysql同步RDS" class="headerlink" title="五、配置自建mysql同步RDS"></a>五、配置自建mysql同步RDS</h4><h5 id="1、查看备份下面的文件GTID位置"><a href="#1、查看备份下面的文件GTID位置" class="headerlink" title="1、查看备份下面的文件GTID位置"></a>1、查看备份下面的文件GTID位置</h5><pre><code class="shell">vim ./sqlalldb.sql		#搜索GTID
SET @MYSQLDUMP_TEMP_LOG_BIN = @@SESSION.SQL_LOG_BIN;
SET @@SESSION.SQL_LOG_BIN= 0;

--
-- GTID state at the beginning of the backup 
--

SET @@GLOBAL.GTID_PURGED=/*!80000 &#39;+&#39;*/ &#39;8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1,
8f9990ee-ce09-11ec-963f-00163e18a3de:1-456487&#39;;
</code></pre>
<h5 id="2、配置同步-这里是连接自建mysql操作"><a href="#2、配置同步-这里是连接自建mysql操作" class="headerlink" title="2、配置同步,这里是连接自建mysql操作"></a>2、配置同步,这里是连接自建mysql操作</h5><p>注意用户名密码，和host不要朝抄。</p>
<pre><code class="shell">mysql -uroot -p 
mysql&gt; change master to master_host = &#39;rm-wz9037f14v61.mysql.rds.aliyuncs.com&#39;, master_port = 3306, master_user = &#39;ac_repliuser&#39;, master_password=&#39;00163e0ef90f&#39;, master_auto_position = 1;
</code></pre>
<h5 id="3、重新设置slave"><a href="#3、重新设置slave" class="headerlink" title="3、重新设置slave"></a>3、重新设置slave</h5><p>上面的值位置去掉&#x2F;<em>!80000 ‘+’</em>&#x2F; </p>
<pre><code class="shell">mysql&gt; reset slave;
mysql&gt; SET @@GLOBAL.GTID_PURGED=&#39;8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1,
    &#39;&gt; 8f9990ee-ce09-11ec-963f-00163e18a3de:1-456487&#39;;
Query OK, 0 rows affected (0.00 sec)
</code></pre>
<h5 id="4、开始同步"><a href="#4、开始同步" class="headerlink" title="4、开始同步"></a>4、开始同步</h5><pre><code class="shell">mysql&gt; start slave;
Query OK, 0 rows affected, 1 warning (0.01 sec)
</code></pre>
<h4 id="六、检查同步状态"><a href="#六、检查同步状态" class="headerlink" title="六、检查同步状态"></a>六、检查同步状态</h4><h5 id="1、连接到RDS查看，这是主库show-master-status-G过几分钟查一下。Position应该会更新"><a href="#1、连接到RDS查看，这是主库show-master-status-G过几分钟查一下。Position应该会更新" class="headerlink" title="1、连接到RDS查看，这是主库show  master  status\G过几分钟查一下。Position应该会更新"></a>1、连接到RDS查看，这是主库show  <font color="red">master</font>  status\G过几分钟查一下。Position应该会更新</h5><pre><code class="shell">mysql -h rm-wz9037f14v67d6391.mysql.rds.aliyuncs.com -u ac_rdsadmin -p
mysql&gt; show master status\G
*************************** 1. row ***************************
             File: mysql-bin.000130
         Position: 1714982
     Binlog_Do_DB: 
 Binlog_Ignore_DB: 
Executed_Gtid_Set: 8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1,
8f9990ee-ce09-11ec-963f-00163e18a3de:1-457994
1 row in set (0.00 sec)

mysql&gt; show master status\G
*************************** 1. row ***************************
             File: mysql-bin.000130
         Position: 1732779
     Binlog_Do_DB: 
 Binlog_Ignore_DB: 
Executed_Gtid_Set: 8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1,
8f9990ee-ce09-11ec-963f-00163e18a3de:1-458032
1 row in set (0.00 sec)
</code></pre>
<h5 id="2、连接到MYSQL查看-show-slave-status-G"><a href="#2、连接到MYSQL查看-show-slave-status-G" class="headerlink" title="2、连接到MYSQL查看. show   slave  status \G"></a>2、连接到MYSQL查看. show  <font color=red> slave</font>  status \G</h5><p>原则上只看Slave_IO_Running和Slave_SQL_Running是不是为yes就代表正常工作。读rds的日志点Read_Master_Log_Pos，Exec_Master_Log_Pos是执行点，这两个会慢慢更新变动。Executed_Gtid_Set是否和RDS那边的一致。过几分钟查一次。</p>
<pre><code class="shell">mysql&gt; show slave status \G
*************************** 1. row ***************************
               Slave_IO_State: Waiting for source to send event
                  Master_Host: rm-wz90f37f14v67drr6391.mysql.rds.aliyuncs.com
                  Master_User: ac_repliuser
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: mysql-bin.000130
          Read_Master_Log_Pos: 1671383
               Relay_Log_File: monitoring-relay-bin.000003
                Relay_Log_Pos: 1159167
        Relay_Master_Log_File: mysql-bin.000130
             Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB: 
          Replicate_Ignore_DB: mysql,sys,information_schema,performance_schema
           Replicate_Do_Table: 
       Replicate_Ignore_Table: 
      Replicate_Wild_Do_Table: 
  Replicate_Wild_Ignore_Table: 
                   Last_Errno: 0
                   Last_Error: 
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 1671383
              Relay_Log_Space: 1159562
              Until_Condition: None
               Until_Log_File: 
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File: 
           Master_SSL_CA_Path: 
              Master_SSL_Cert: 
            Master_SSL_Cipher: 
               Master_SSL_Key: 
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error: 
               Last_SQL_Errno: 0
               Last_SQL_Error: 
  Replicate_Ignore_Server_Ids: 
             Master_Server_Id: 21490876
                  Master_UUID: 8f9990ee-ce09-11ec-963f-00163e18a3de
             Master_Info_File: mysql.slave_master_info
                    SQL_Delay: 0
          SQL_Remaining_Delay: NULL
      Slave_SQL_Running_State: Replica has read all relay log; waiting for more updates
           Master_Retry_Count: 86400
                  Master_Bind: 
      Last_IO_Error_Timestamp: 
     Last_SQL_Error_Timestamp: 
               Master_SSL_Crl: 
           Master_SSL_Crlpath: 
           Retrieved_Gtid_Set: 8f9990ee-ce09-11ec-963f-00163e18a3de:456488-457902
            Executed_Gtid_Set: 8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1,
8f9990ee-ce09-11ec-963f-00163e18a3de:1-457902
                Auto_Position: 1
         Replicate_Rewrite_DB: 
                 Channel_Name: 
           Master_TLS_Version: 
       Master_public_key_path: 
        Get_master_public_key: 0
            Network_Namespace: 
1 row in set, 1 warning (0.01 sec)
</code></pre>
<p>PS:</p>
<p>–负责把主库bin日志(Master_Log)内容投递到从库的中继日志上(Relay_Log)</p>
<p>Slave_IO_Running:Yes</p>
<p>–负责把中继日志上的语句在从库上执行一遍</p>
<p>Slave_SQL_Running:Yes</p>
<p>–Yes：表示正常， No：表示异常</p>
<p>Slave_IO线程相对比较简单，一般不容易出错。如果显示为No，则有可能以下原因导致：</p>
<p>​    * 网络问题 </p>
<p> * 权限问题，例如在配置slave同步时因为slave访问master没有权限导致 </p>
<p> * master上的binlog文件误删或者其他问题导致的master库突然停止更新binlog日志。解决方案是找到同步的点和binlog文件，重新change master</p>
<p> 相对的Slave_SQL线程就比较容易出错。例如人为的在从库插入一条数据，造成的主从库不一致。但此时两个线程的状态仍然是正常的，主库插入数据时，到从库同步时，从库会出现主键重复的错误。此时Slave_SQL_Running的状态变为No </p>
<p> 而Last_SQL_Error, Last_SQL_Error_Timestamp会记录错误的原因和发生的时间 </p>
<p> Slave_SQL_Running线程报错之后，会停止后续的SQL执行，因为向后执行会导致错误修复的难度增加</p>
<p>修复错误</p>
<p>– 先停止slave</p>
<p>stop slave;</p>
<p>– 跳过执行语句数量</p>
<p>– 此时需要查看错误日志去修复报错信息</p>
<p>set global sql_slave_skip_counter&#x3D;1;</p>
<p>– 开始slave</p>
<p>start slave;</p>
<p>– 然后再检查一下 slave status</p>
<p>如何判断完全同步</p>
<p>* Master_Log_File 和 Relay_Master_Log_File 所指向的文件必须一致</p>
<p>* Relay_Log_Pos 和 Exec_Master_Log_Pos 位置也要一致才行</p>
<p>* Slave_SQL_Running_State: 显示为wait 中继日志的sql语句已经全部执行完毕</p>
<h5 id="3、到RDS数据库里给用户改个密码。看是否会同步。"><a href="#3、到RDS数据库里给用户改个密码。看是否会同步。" class="headerlink" title="3、到RDS数据库里给用户改个密码。看是否会同步。"></a>3、到RDS数据库里给用户改个密码。看是否会同步。</h5><p>未改密码之前的RDS：万军密码加密值为10470c3b4b1fed12c3baac014be15fac67c6e815</p>
<pre><code class="shell">mysql&gt; use wrp_blade_cloud
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; select * from blade_user where name=&#39;万军&#39;;
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
| id                  | tenant_id | code | user_type | account | password                                 | name      | real_name | avatar | id_card            | email          | phone       | birthday            | sex  | role_id             | dept_id             | post_id | create_user         | create_dept         | create_time         | update_user         | update_time         | status | is_deleted | auth_status              | id_card_type | id_card_no | phone_status | modify_account_status | auth_manager_status                      |
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
| 1526153517495046146 | 000000    | NULL |      NULL | wzj     | 10470c3b4b1fed12c3baac014be15fac67c6e815 | 万军    | 万军    | NULL   | 421023198812012155 | wzj@pidi.com | 18938831403 | 1988-12-01 12:00:00 |    1 | 1504996292152147969 | 1526111745112317954 | NULL    | 1526123139970949121 | 1526111745112317954 | 2022-05-16 18:52:08 | 1526153517495046146 | 2022-05-16 18:56:24 |      1 |          0 | 0x01                     |            1 | NULL       | 1            | 1                     | 0x00                                     |
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
1 row in set (0.00 sec)
</code></pre>
<p>自建mysql未改密码之前：万军密码加密值为10470c3b4b1fed12c3baac014be15fac67c6e815</p>
<pre><code class="shell">mysql&gt; use wrp_blade_cloud
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&gt; select * from blade_user where name=&#39;万军&#39;;
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
| id                  | tenant_id | code | user_type | account | password                                 | name      | real_name | avatar | id_card            | email          | phone       | birthday            | sex  | role_id             | dept_id             | post_id | create_user         | create_dept         | create_time         | update_user         | update_time         | status | is_deleted | auth_status              | id_card_type | id_card_no | phone_status | modify_account_status | auth_manager_status                      |
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
| 1526153517495046146 | 000000    | NULL |      NULL | wzj     | 10470c3b4b1fed12c3baac014be15fac67c6e815 | 万军    | 万军    | NULL   | 421023198812012155 | wzj@pidi.com | 18938831403 | 1988-12-01 12:00:00 |    1 | 1504996292152147969 | 1526111745112317954 | NULL    | 1526123139970949121 | 1526111745112317954 | 2022-05-16 18:52:08 | 1526153517495046146 | 2022-05-16 18:56:24 |      1 |          0 | 0x01                     |            1 | NULL       | 1            | 1                     | 0x00                                     |
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
1 row in set (0.00 sec)
</code></pre>
<p>RDS改密码之后 ：加密值变为47ea0f61e63bfdfbe1243a17f856fe00ae820770</p>
<pre><code class="shell">mysql&gt; select * from blade_user where name=&#39;万军&#39;;
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
| id                  | tenant_id | code | user_type | account | password                                 | name      | real_name | avatar | id_card            | email          | phone       | birthday            | sex  | role_id             | dept_id             | post_id | create_user         | create_dept         | create_time         | update_user         | update_time         | status | is_deleted | auth_status              | id_card_type | id_card_no | phone_status | modify_account_status | auth_manager_status                      |
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
| 1526153517495046146 | 000000    | NULL |      NULL | wzj     | 47ea0f61e63bfdfbe1243a17f856fe00ae820770 | 万军    | 万军    | NULL   | 421023198812012155 | wzj@pidi.com | 18938831403 | 1988-12-01 12:00:00 |    1 | 1504996292152147969 | 1526111745112317954 | NULL    | 1526123139970949121 | 1526111745112317954 | 2022-05-16 18:52:08 | 1526153517495046146 | 2022-05-16 18:56:24 |      1 |          0 | 0x01                     |            1 | NULL       | 1            | 1                     | 0x00                                     |
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; exit
Bye
</code></pre>
<p>改密码后，自建mysql读库是否同步：也同步为47ea0f61e63bfdfbe1243a17f856fe00ae820770 了。说明同步在时时进行中。</p>
<pre><code class="shell">mysql&gt; select * from blade_user where name=&#39;万军&#39;;
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
| id                  | tenant_id | code | user_type | account | password                                 | name      | real_name | avatar | id_card            | email          | phone       | birthday            | sex  | role_id             | dept_id             | post_id | create_user         | create_dept         | create_time         | update_user         | update_time         | status | is_deleted | auth_status              | id_card_type | id_card_no | phone_status | modify_account_status | auth_manager_status                      |
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
| 1526153517495046146 | 000000    | NULL |      NULL | wzj     | 47ea0f61e63bfdfbe1243a17f856fe00ae820770 | 万军    | 万军    | NULL   | 421023198812012155 | wzj@pidi.com | 18938831403 | 1988-12-01 12:00:00 |    1 | 1504996292152147969 | 1526111745112317954 | NULL    | 1526123139970949121 | 1526111745112317954 | 2022-05-16 18:52:08 | 1526153517495046146 | 2022-05-16 18:56:24 |      1 |          0 | 0x01                     |            1 | NULL       | 1            | 1                     | 0x00                                     |
+---------------------+-----------+------+-----------+---------+------------------------------------------+-----------+-----------+--------+--------------------+----------------+-------------+---------------------+------+---------------------+---------------------+---------+---------------------+---------------------+---------------------+---------------------+---------------------+--------+------------+--------------------------+--------------+------------+--------------+-----------------------+------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; exit
Bye
</code></pre>
<h4 id="七、2022-10-27查到同步失败"><a href="#七、2022-10-27查到同步失败" class="headerlink" title="七、2022.10.27查到同步失败."></a>七、2022.10.27查到同步失败.</h4><p>select * from performance_schema.replication_applier_status_by_worker\G可查到哪个位置同步失败</p>
<pre><code class="shell">mysql&gt; show slave status \G
*************************** 1. row ***************************
               Slave_IO_State: Waiting for source to send event
                  Master_Host: rm-wz90f37f14v67drr6391.mysql.rds.aliyuncs.com
                  Master_User: ac_repliuser
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: mysql-bin.000699
          Read_Master_Log_Pos: 71425
               Relay_Log_File: monitoring-relay-bin.000921
                Relay_Log_Pos: 284268
        Relay_Master_Log_File: mysql-bin.000583
             Slave_IO_Running: Yes
            Slave_SQL_Running: No
              Replicate_Do_DB: 
          Replicate_Ignore_DB: mysql,sys,information_schema,performance_schema
           Replicate_Do_Table: 
       Replicate_Ignore_Table: 
      Replicate_Wild_Do_Table: 
  Replicate_Wild_Ignore_Table: 
                   Last_Errno: 1410
                   Last_Error: Coordinator stopped because there were error(s) in the worker(s). The most recent failure being: Worker 1 failed executing transaction &#39;8f9990ee-ce09-11ec-963f-00163e18a3de:2155158&#39; at master log mysql-bin.000583, end_log_pos 284627. See error log and/or performance_schema.replication_applier_status_by_worker table for more details about this failure or others, if any.
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 283988
              Relay_Log_Space: 341063670
              Until_Condition: None
               Until_Log_File: 
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File: 
           Master_SSL_CA_Path: 
              Master_SSL_Cert: 
            Master_SSL_Cipher: 
               Master_SSL_Key: 
        Seconds_Behind_Master: NULL
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error: 
               Last_SQL_Errno: 1410
               Last_SQL_Error: Coordinator stopped because there were error(s) in the worker(s). The most recent failure being: Worker 1 failed executing transaction &#39;8f9990ee-ce09-11ec-963f-00163e18a3de:2155158&#39; at master log mysql-bin.000583, end_log_pos 284627. See error log and/or performance_schema.replication_applier_status_by_worker table for more details about this failure or others, if any.
  Replicate_Ignore_Server_Ids: 
             Master_Server_Id: 21490876
                  Master_UUID: 8f9990ee-ce09-11ec-963f-00163e18a3de
             Master_Info_File: mysql.slave_master_info
                    SQL_Delay: 0
          SQL_Remaining_Delay: NULL
      Slave_SQL_Running_State: 
           Master_Retry_Count: 86400
                  Master_Bind: 
      Last_IO_Error_Timestamp: 
     Last_SQL_Error_Timestamp: 221027 20:05:45
               Master_SSL_Crl: 
           Master_SSL_Crlpath: 
           Retrieved_Gtid_Set: 8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:2-27,
8f9990ee-ce09-11ec-963f-00163e18a3de:456488-850920:850922-851034:851039-852407:852411-852519:852522-2740741
            Executed_Gtid_Set: 08e6acf6-e6d2-11ec-a645-00163e18a18e:1-25,
8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1-21,
8f9990ee-ce09-11ec-963f-00163e18a3de:1-2155157
                Auto_Position: 1
         Replicate_Rewrite_DB: 
                 Channel_Name: 
           Master_TLS_Version: 
       Master_public_key_path: 
        Get_master_public_key: 0
            Network_Namespace: 
1 row in set, 1 warning (0.00 sec)

mysql&gt; select * from performance_schema.replication_applier_status_by_worker\G
*************************** 1. row ***************************
                                           CHANNEL_NAME: 
                                              WORKER_ID: 1
                                              THREAD_ID: NULL
                                          SERVICE_STATE: OFF
                                      LAST_ERROR_NUMBER: 1410
                                     LAST_ERROR_MESSAGE: Worker 1 failed executing transaction &#39;8f9990ee-ce09-11ec-963f-00163e18a3de:2155158&#39; at master log mysql-bin.000583, end_log_pos 284627; Error &#39;You are not allowed to create a user with GRANT&#39; on query. Default database: &#39;&#39;. Query: &#39;GRANT SELECT, LOCK TABLES, SHOW VIEW ON `wrp\_aciot`.* TO &#39;user_select&#39;@&#39;%&#39;&#39;
                                   LAST_ERROR_TIMESTAMP: 2022-10-27 20:05:45.185528
                               LAST_APPLIED_TRANSACTION: 
     LAST_APPLIED_TRANSACTION_ORIGINAL_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
    LAST_APPLIED_TRANSACTION_IMMEDIATE_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
         LAST_APPLIED_TRANSACTION_START_APPLY_TIMESTAMP: 0000-00-00 00:00:00.000000
           LAST_APPLIED_TRANSACTION_END_APPLY_TIMESTAMP: 0000-00-00 00:00:00.000000
                                   APPLYING_TRANSACTION: 8f9990ee-ce09-11ec-963f-00163e18a3de:2155158
         APPLYING_TRANSACTION_ORIGINAL_COMMIT_TIMESTAMP: 2022-09-29 08:54:04.695999
        APPLYING_TRANSACTION_IMMEDIATE_COMMIT_TIMESTAMP: 2022-09-29 08:54:04.695999
             APPLYING_TRANSACTION_START_APPLY_TIMESTAMP: 2022-10-27 20:05:45.184016
                 LAST_APPLIED_TRANSACTION_RETRIES_COUNT: 0
   LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_NUMBER: 0
  LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_MESSAGE: 
LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_TIMESTAMP: 0000-00-00 00:00:00.000000
                     APPLYING_TRANSACTION_RETRIES_COUNT: 0
       APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_NUMBER: 0
      APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_MESSAGE: 
    APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_TIMESTAMP: 0000-00-00 00:00:00.000000
*************************** 2. row ***************************
                                           CHANNEL_NAME: 
                                              WORKER_ID: 2
                                              THREAD_ID: NULL
                                          SERVICE_STATE: OFF
                                      LAST_ERROR_NUMBER: 0
                                     LAST_ERROR_MESSAGE: 
                                   LAST_ERROR_TIMESTAMP: 0000-00-00 00:00:00.000000
                               LAST_APPLIED_TRANSACTION: 
     LAST_APPLIED_TRANSACTION_ORIGINAL_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
    LAST_APPLIED_TRANSACTION_IMMEDIATE_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
         LAST_APPLIED_TRANSACTION_START_APPLY_TIMESTAMP: 0000-00-00 00:00:00.000000
           LAST_APPLIED_TRANSACTION_END_APPLY_TIMESTAMP: 0000-00-00 00:00:00.000000
                                   APPLYING_TRANSACTION: 
         APPLYING_TRANSACTION_ORIGINAL_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
        APPLYING_TRANSACTION_IMMEDIATE_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
             APPLYING_TRANSACTION_START_APPLY_TIMESTAMP: 0000-00-00 00:00:00.000000
                 LAST_APPLIED_TRANSACTION_RETRIES_COUNT: 0
   LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_NUMBER: 0
  LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_MESSAGE: 
LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_TIMESTAMP: 0000-00-00 00:00:00.000000
                     APPLYING_TRANSACTION_RETRIES_COUNT: 0
       APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_NUMBER: 0
      APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_MESSAGE: 
    APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_TIMESTAMP: 0000-00-00 00:00:00.000000
*************************** 3. row ***************************
                                           CHANNEL_NAME: 
                                              WORKER_ID: 3
                                              THREAD_ID: NULL
                                          SERVICE_STATE: OFF
                                      LAST_ERROR_NUMBER: 0
                                     LAST_ERROR_MESSAGE: 
                                   LAST_ERROR_TIMESTAMP: 0000-00-00 00:00:00.000000
                               LAST_APPLIED_TRANSACTION: 
     LAST_APPLIED_TRANSACTION_ORIGINAL_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
    LAST_APPLIED_TRANSACTION_IMMEDIATE_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
         LAST_APPLIED_TRANSACTION_START_APPLY_TIMESTAMP: 0000-00-00 00:00:00.000000
           LAST_APPLIED_TRANSACTION_END_APPLY_TIMESTAMP: 0000-00-00 00:00:00.000000
                                   APPLYING_TRANSACTION: 
         APPLYING_TRANSACTION_ORIGINAL_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
        APPLYING_TRANSACTION_IMMEDIATE_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
             APPLYING_TRANSACTION_START_APPLY_TIMESTAMP: 0000-00-00 00:00:00.000000
                 LAST_APPLIED_TRANSACTION_RETRIES_COUNT: 0
   LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_NUMBER: 0
  LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_MESSAGE: 
LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_TIMESTAMP: 0000-00-00 00:00:00.000000
                     APPLYING_TRANSACTION_RETRIES_COUNT: 0
       APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_NUMBER: 0
      APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_MESSAGE: 
    APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_TIMESTAMP: 0000-00-00 00:00:00.000000
*************************** 4. row ***************************
                                           CHANNEL_NAME: 
                                              WORKER_ID: 4
                                              THREAD_ID: NULL
                                          SERVICE_STATE: OFF
                                      LAST_ERROR_NUMBER: 0
                                     LAST_ERROR_MESSAGE: 
                                   LAST_ERROR_TIMESTAMP: 0000-00-00 00:00:00.000000
                               LAST_APPLIED_TRANSACTION: 
     LAST_APPLIED_TRANSACTION_ORIGINAL_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
    LAST_APPLIED_TRANSACTION_IMMEDIATE_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
         LAST_APPLIED_TRANSACTION_START_APPLY_TIMESTAMP: 0000-00-00 00:00:00.000000
           LAST_APPLIED_TRANSACTION_END_APPLY_TIMESTAMP: 0000-00-00 00:00:00.000000
                                   APPLYING_TRANSACTION: 
         APPLYING_TRANSACTION_ORIGINAL_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
        APPLYING_TRANSACTION_IMMEDIATE_COMMIT_TIMESTAMP: 0000-00-00 00:00:00.000000
             APPLYING_TRANSACTION_START_APPLY_TIMESTAMP: 0000-00-00 00:00:00.000000
                 LAST_APPLIED_TRANSACTION_RETRIES_COUNT: 0
   LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_NUMBER: 0
  LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_MESSAGE: 
LAST_APPLIED_TRANSACTION_LAST_TRANSIENT_ERROR_TIMESTAMP: 0000-00-00 00:00:00.000000
                     APPLYING_TRANSACTION_RETRIES_COUNT: 0
       APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_NUMBER: 0
      APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_MESSAGE: 
    APPLYING_TRANSACTION_LAST_TRANSIENT_ERROR_TIMESTAMP: 0000-00-00 00:00:00.000000
4 rows in set (0.01 sec)
</code></pre>
<p>查到是授权问题 </p>
<p> LAST_ERROR_NUMBER: 1410<br> LAST_ERROR_MESSAGE: Worker 1 failed executing transaction ‘8f9990ee-ce09-11ec-963f-00163e18a3de:2155158’ at master log mysql-bin.000583, end_log_pos 284627; Error ‘You are not allowed to create a user with GRANT’ on query. Default database: ‘’. Query: ‘GRANT SELECT, LOCK TABLES, SHOW VIEW ON <code>wrp\_aciot</code>.* TO ‘user_select‘@’%’’</p>
<p>看报错应该是在rds平台上创建了user_select账号，然后自建mysql没办法完成这动作。</p>
<p>当我发现未同步时已经好些天了。并且阿里云平台会过一段时间清理binlog日志。就是mysql-bin.000583已经清除掉了。我没办法跳过这个继续同步。我开始备份binlog时是mysql-bin.000595，中间差了好几个。没办法补全。只能删除所有，重新来。</p>
<h5 id="1、先在生产RDS导出所有库。"><a href="#1、先在生产RDS导出所有库。" class="headerlink" title="1、先在生产RDS导出所有库。"></a>1、先在生产RDS导出所有库。</h5><pre><code class="shell">mysqldump --defaults-extra-file=/data/crond/mycli.txt -h 172.22.114.200 --databases front_wms wrp_aciot wrp_blade_cloud wrp_cangdan wrp_insurance wrp_nacos wrp_xxljob &gt; ./rdsalldb202210281627.sql
</code></pre>
<h5 id="2、删除自建mysql现在的所有库"><a href="#2、删除自建mysql现在的所有库" class="headerlink" title="2、删除自建mysql现在的所有库"></a>2、删除自建mysql现在的所有库</h5><p>3、把rds所有库导入到自建mysql中</p>
<pre><code class="shell">[root@monitoring ~]# mysql -uroot -p &lt; rdsalldb202210281627.sql 
Enter password: 
ERROR 3546 (HY000) at line 24: @@GLOBAL.GTID_PURGED cannot be changed: the added gtid set must not overlap with @@GLOBAL.GTID_EXECUTED
</code></pre>
<p>导入失败。原因是之前配置过master位置. 现在导入的不对。所以需要reset master</p>
<pre><code class="shell">mysql&gt; reset slave;
Query OK, 0 rows affected, 1 warning (0.03 sec)
mysql&gt; show master status;
+------------------+----------+--------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                                                                                                                    |
+------------------+----------+--------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------+
| mysql-bin.000005 |     1688 |              |                  | 08e6acf6-e6d2-11ec-a645-00163e18a18e:1-32,
8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1-21,
8f9990ee-ce09-11ec-963f-00163e18a3de:1-2155157 |
+------------------+----------+--------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; show slave status;
+----------------+---------------------------------------------+--------------+-------------+---------------+-----------------+---------------------+-----------------------------+---------------+-----------------------+------------------+-------------------+-----------------+-------------------------------------------------+--------------------+------------------------+-------------------------+-----------------------------+------------+------------+--------------+---------------------+-----------------+-----------------+----------------+---------------+--------------------+--------------------+--------------------+-----------------+-------------------+----------------+-----------------------+-------------------------------+---------------+---------------+----------------+----------------+-----------------------------+------------------+-------------+-------------------------+-----------+---------------------+-------------------------+--------------------+-------------+-------------------------+--------------------------+----------------+--------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+---------------+----------------------+--------------+--------------------+------------------------+-----------------------+-------------------+
| Slave_IO_State | Master_Host                                 | Master_User  | Master_Port | Connect_Retry | Master_Log_File | Read_Master_Log_Pos | Relay_Log_File              | Relay_Log_Pos | Relay_Master_Log_File | Slave_IO_Running | Slave_SQL_Running | Replicate_Do_DB | Replicate_Ignore_DB                             | Replicate_Do_Table | Replicate_Ignore_Table | Replicate_Wild_Do_Table | Replicate_Wild_Ignore_Table | Last_Errno | Last_Error | Skip_Counter | Exec_Master_Log_Pos | Relay_Log_Space | Until_Condition | Until_Log_File | Until_Log_Pos | Master_SSL_Allowed | Master_SSL_CA_File | Master_SSL_CA_Path | Master_SSL_Cert | Master_SSL_Cipher | Master_SSL_Key | Seconds_Behind_Master | Master_SSL_Verify_Server_Cert | Last_IO_Errno | Last_IO_Error | Last_SQL_Errno | Last_SQL_Error | Replicate_Ignore_Server_Ids | Master_Server_Id | Master_UUID | Master_Info_File        | SQL_Delay | SQL_Remaining_Delay | Slave_SQL_Running_State | Master_Retry_Count | Master_Bind | Last_IO_Error_Timestamp | Last_SQL_Error_Timestamp | Master_SSL_Crl | Master_SSL_Crlpath | Retrieved_Gtid_Set | Executed_Gtid_Set                                                                                                                    | Auto_Position | Replicate_Rewrite_DB | Channel_Name | Master_TLS_Version | Master_public_key_path | Get_master_public_key | Network_Namespace |
+----------------+---------------------------------------------+--------------+-------------+---------------+-----------------+---------------------+-----------------------------+---------------+-----------------------+------------------+-------------------+-----------------+-------------------------------------------------+--------------------+------------------------+-------------------------+-----------------------------+------------+------------+--------------+---------------------+-----------------+-----------------+----------------+---------------+--------------------+--------------------+--------------------+-----------------+-------------------+----------------+-----------------------+-------------------------------+---------------+---------------+----------------+----------------+-----------------------------+------------------+-------------+-------------------------+-----------+---------------------+-------------------------+--------------------+-------------+-------------------------+--------------------------+----------------+--------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+---------------+----------------------+--------------+--------------------+------------------------+-----------------------+-------------------+
|                | rm-wz9037f14v67d6391.mysql.rds.aliyuncs.com | ac_repliuser |        3306 |            60 |                 |                   4 | monitoring-relay-bin.000001 |             4 |                       | No               | No                |                 | mysql,sys,information_schema,performance_schema |                    |                        |                         |                             |          0 |            |            0 |                   0 |             180 | None            |                |             0 | No                 |                    |                    |                 |                   |                |                  NULL | No                            |             0 |               |              0 |                |                             |         21490876 |             | mysql.slave_master_info |         0 |                NULL |                         |              86400 |             |                         |                          |                |                    |                    | 08e6acf6-e6d2-11ec-a645-00163e18a18e:1-32,
8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1-21,
8f9990ee-ce09-11ec-963f-00163e18a3de:1-2155157 |             1 |                      |              |                    |                        |                     0 |                   |
+----------------+---------------------------------------------+--------------+-------------+---------------+-----------------+---------------------+-----------------------------+---------------+-----------------------+------------------+-------------------+-----------------+-------------------------------------------------+--------------------+------------------------+-------------------------+-----------------------------+------------+------------+--------------+---------------------+-----------------+-----------------+----------------+---------------+--------------------+--------------------+--------------------+-----------------+-------------------+----------------+-----------------------+-------------------------------+---------------+---------------+----------------+----------------+-----------------------------+------------------+-------------+-------------------------+-----------+---------------------+-------------------------+--------------------+-------------+-------------------------+--------------------------+----------------+--------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------+---------------+----------------------+--------------+--------------------+------------------------+-----------------------+-------------------+
1 row in set, 1 warning (0.00 sec)

mysql&gt; reset master;
Query OK, 0 rows affected (0.06 sec)

mysql&gt; exit
Bye
[root@monitoring ~]# mysql -uroot -p &lt; rdsalldb202210281627.sql 
Enter password: 
[root@monitoring ~]# mysql -uroot -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 61
Server version: 8.0.29 MySQL Community Server - GPL

Copyright (c) 2000, 2022, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| front_wms          |
| information_schema |
| mysql              |
| performance_schema |
| sys                |
| wrp_aciot          |
| wrp_blade_cloud    |
| wrp_cangdan        |
| wrp_insurance      |
| wrp_nacos          |
| wrp_xxljob         |
+--------------------+
11 rows in set (0.01 sec)
</code></pre>
<p>7个库都导入进去了。</p>
<h5 id="3、配置-同步位置"><a href="#3、配置-同步位置" class="headerlink" title="3、配置 同步位置"></a>3、配置 同步位置</h5><pre><code class="shell">mysql&gt; reset slave;
Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql&gt; SET @@GLOBAL.GTID_PURGED=&#39;8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1-27,
    &#39;&gt; 8f9990ee-ce09-11ec-963f-00163e18a3de:1-2758847&#39;;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; show master status \G;
*************************** 1. row ***************************
             File: mysql-bin.000001
         Position: 157
     Binlog_Do_DB: 
 Binlog_Ignore_DB: 
Executed_Gtid_Set: 8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1-27,
8f9990ee-ce09-11ec-963f-00163e18a3de:1-2758847
1 row in set (0.00 sec)

ERROR: 
No query specified

mysql&gt; show master status;
+------------------+----------+--------------+------------------+-------------------------------------------------------------------------------------------+
| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                                                                         |
+------------------+----------+--------------+------------------+-------------------------------------------------------------------------------------------+
| mysql-bin.000001 |      157 |              |                  | 8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1-27,
8f9990ee-ce09-11ec-963f-00163e18a3de:1-2758847 |
+------------------+----------+--------------+------------------+-------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; start slave;
Query OK, 0 rows affected, 1 warning (0.01 sec)
</code></pre>
<h5 id="4、查看是否同步成功"><a href="#4、查看是否同步成功" class="headerlink" title="4、查看是否同步成功"></a>4、查看是否同步成功</h5><pre><code class="shell">mysql&gt; show slave status \G
*************************** 1. row ***************************
               Slave_IO_State: Waiting for source to send event
                  Master_Host: rm-wz9037f14v67d6391.mysql.rds.aliyuncs.com
                  Master_User: ac_repliuser
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: mysql-bin.000702
          Read_Master_Log_Pos: 2025577
               Relay_Log_File: monitoring-relay-bin.000003
                Relay_Log_Pos: 349581
        Relay_Master_Log_File: mysql-bin.000702
             Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB: 
          Replicate_Ignore_DB: mysql,sys,information_schema,performance_schema
           Replicate_Do_Table: 
       Replicate_Ignore_Table: 
      Replicate_Wild_Do_Table: 
  Replicate_Wild_Ignore_Table: 
                   Last_Errno: 0
                   Last_Error: 
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 2025577
              Relay_Log_Space: 349976
              Until_Condition: None
               Until_Log_File: 
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File: 
           Master_SSL_CA_Path: 
              Master_SSL_Cert: 
            Master_SSL_Cipher: 
               Master_SSL_Key: 
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error: 
               Last_SQL_Errno: 0
               Last_SQL_Error: 
  Replicate_Ignore_Server_Ids: 
             Master_Server_Id: 21490876
                  Master_UUID: 8f9990ee-ce09-11ec-963f-00163e18a3de
             Master_Info_File: mysql.slave_master_info
                    SQL_Delay: 0
          SQL_Remaining_Delay: NULL
      Slave_SQL_Running_State: Replica has read all relay log; waiting for more updates
           Master_Retry_Count: 86400
                  Master_Bind: 
      Last_IO_Error_Timestamp: 
     Last_SQL_Error_Timestamp: 
               Master_SSL_Crl: 
           Master_SSL_Crlpath: 
           Retrieved_Gtid_Set: 8f9990ee-ce09-11ec-963f-00163e18a3de:2758848-2759460
            Executed_Gtid_Set: 8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1-27,
8f9990ee-ce09-11ec-963f-00163e18a3de:1-2759460
                Auto_Position: 1
         Replicate_Rewrite_DB: 
                 Channel_Name: 
           Master_TLS_Version: 
       Master_public_key_path: 
        Get_master_public_key: 0
            Network_Namespace: 
1 row in set, 1 warning (0.00 sec)

mysql&gt; show slave status \G
*************************** 1. row ***************************
               Slave_IO_State: Waiting for source to send event
                  Master_Host: rm-wz9037f14v67d6391.mysql.rds.aliyuncs.com
                  Master_User: ac_repliuser
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: mysql-bin.000702
          Read_Master_Log_Pos: 2027459
               Relay_Log_File: monitoring-relay-bin.000003
                Relay_Log_Pos: 351463
        Relay_Master_Log_File: mysql-bin.000702
             Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB: 
          Replicate_Ignore_DB: mysql,sys,information_schema,performance_schema
           Replicate_Do_Table: 
       Replicate_Ignore_Table: 
      Replicate_Wild_Do_Table: 
  Replicate_Wild_Ignore_Table: 
                   Last_Errno: 0
                   Last_Error: 
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 2027459
              Relay_Log_Space: 351858
              Until_Condition: None
               Until_Log_File: 
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File: 
           Master_SSL_CA_Path: 
              Master_SSL_Cert: 
            Master_SSL_Cipher: 
               Master_SSL_Key: 
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error: 
               Last_SQL_Errno: 0
               Last_SQL_Error: 
  Replicate_Ignore_Server_Ids: 
             Master_Server_Id: 21490876
                  Master_UUID: 8f9990ee-ce09-11ec-963f-00163e18a3de
             Master_Info_File: mysql.slave_master_info
                    SQL_Delay: 0
          SQL_Remaining_Delay: NULL
      Slave_SQL_Running_State: Replica has read all relay log; waiting for more updates
           Master_Retry_Count: 86400
                  Master_Bind: 
      Last_IO_Error_Timestamp: 
     Last_SQL_Error_Timestamp: 
               Master_SSL_Crl: 
           Master_SSL_Crlpath: 
           Retrieved_Gtid_Set: 8f9990ee-ce09-11ec-963f-00163e18a3de:2758848-2759465
            Executed_Gtid_Set: 8f4bc7e7-ce09-11ec-8d9f-00163e0ef90f:1-27,
8f9990ee-ce09-11ec-963f-00163e18a3de:1-2759465
                Auto_Position: 1
         Replicate_Rewrite_DB: 
                 Channel_Name: 
           Master_TLS_Version: 
       Master_public_key_path: 
        Get_master_public_key: 0
            Network_Namespace: 
1 row in set, 1 warning (0.00 sec)
</code></pre>
<p>好了重做完成</p>
<p>另一个方法。</p>
<p>上面的方法是知道gtid的情况，但如果我不知道gtid，我重新从主库里按每个库导出，再导入到从库，这时不知道哪个gtid是最后的(不知道哪个库最后导出的)，而且目前的从库的gtid也是卡死在某个位置。这时候只需要查看主库的binlog状态，然后在从库执行相应的pos位置就好。当然前提要暂停写入。主库查询语句SHOW MASTER STATUS;</p>
<pre><code class="shell">CHANGE MASTER TO MASTER_HOST=&#39;rm-wz9037f14v67d6391.mysql.rds.aliyuncs.com&#39;, MASTER_USER=&#39;ac_repliuser&#39;, MASTER_PASSWORD=&#39;00163e0ef90f&#39;, master_log_file=&#39;mysql-bin.002376&#39;,MASTER_LOG_POS=1812244;
</code></pre>
<p>以下是其他人的恢复同步办法。set @@session.gtid_next&#x3D;automatic; 可借鉴。</p>
<pre><code class="shell">mysql&gt;  stop slave;
Query OK, 0 rows affected, 1 warning (0.01 sec)

mysql&gt; set @@session.gtid_next=&#39;5d939d06-bd4e-11ec-a3fd-fa163e102a2d:1&#39;;
Query OK, 0 rows affected (0.00 sec)

mysql&gt;  begin;commit;
Query OK, 0 rows affected (0.00 sec)

Query OK, 0 rows affected (0.00 sec)

mysql&gt; set @@session.gtid_next=automatic;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; start slave;
Query OK, 0 rows affected, 1 warning (0.04 sec)

mysql&gt;  show slave status\G;
</code></pre>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 6430186@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>






    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2016-2020 匹敌
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
